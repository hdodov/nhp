%YAML 1.2
---
file_extensions:
  - nhp
scope: source.nhp

contexts:
  main:
    - match: ""
      push: "Packages/JavaScript/JavaScript.sublime-syntax"
      with_prototype: 
        - match: "^\\s*(?=<template>)"
          push: template
        - match: "^\\s*(?=<)"
          embed: "Packages/HTML/HTML.sublime-syntax"
          escape: $

  template:
    - meta_content_scope: text.nhp.basic
    - match: "(?<=<\\/template>)"
      pop: true
    - include: "Packages/HTML/HTML.sublime-syntax"
