var ms = require('ms');
var foo = require('./foo');
var escape = require('escape-html');

<!DOCTYPE html>
<html>
<head>
    <title>NHP</title>
</head>
<body>
    <div>
        // var prom = new Promise((resolve, reject) => {
        //     setTimeout(function () {
        //         resolve('working');
        //     }, 500);
        // });

        <h1>${ escape('&<hello>') }</h1>

        var cnt = capture(() => {
            <h1>${ arguments.query.test }</h1>
        });

        <echo plain strip>
            <pre>
                `"\${ cnt.toUpperCase() }"`"
            </pre>

            <div>
                <p>
                    <span>test</span>
                </p>
            </div>
        </echo>


        var data = await include('./mods/md.nhp', {
            div: capture(() => {
                <echo escape>
                    <div style="background: blue;">
                        <p>captured: ${ 5 + 5 }</p>
                    </div>
                </echo>
            })
        });

        <pre>${ JSON.stringify(data) }</pre>

        <h1>${ ms(Math.random() * 10e4) }</h1>
        <h2>${ arguments.foo }</h2>

        <div>
            <echo>
                foo
                bar
                baz
            </echo>
        </div>

        <ul>
            for (var i = 0; i < 50; i++) {
                <li data-index="${i}">${i}</li>
            }
        </ul>

        exports.test = Date.now();

        <echo>
            for (var i = 0; i < 50; i++) {
                console.log('5');
            }
        </echo>
    </div>

    <pre style="background-color: #eee">
        echo(__render.toString(), {
            escape: true
        });
    </pre>
</body>
</html>
